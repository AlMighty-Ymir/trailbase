---
import Form from "@/components/Form.astro";

import { AUTH_API, INPUT_STYLE, BUTTON_STYLE } from "@/lib/constants";

const base = import.meta.env.BASE_URL;
const profilePageUrl = `${base}/profile`;
---

<Form title="Change Email">
  <form
    id="reset-update-form"
    class="flex flex-col gap-2"
    action={`${AUTH_API}/change_email/request`}
    method="post"
    enctype="application/x-www-form-urlencoded"
  >
    <div class="hidden">
      {"{{ state }}"}
    </div>

    <div
      class="my-4 grid grid-cols-2 items-center gap-4"
      style={{ "grid-template-columns": "auto 1fr" }}
    >
      <label>Old E-Mail:</label>
      <input
        required
        class={INPUT_STYLE}
        type="email"
        name="old_email"
        placeholder="Email"
      />

      <label>New E-Mail:</label>
      <input
        required
        class={INPUT_STYLE}
        type="email"
        name="new_email"
        placeholder="Email"
      />
    </div>
  </form>

  <div class="flex w-full justify-between">
    <a class:list={BUTTON_STYLE} href={profilePageUrl}>Back</a>

    <button class:list={BUTTON_STYLE} type="submit"
      >Send Email Verification</button
    >
  </div>
</Form>
